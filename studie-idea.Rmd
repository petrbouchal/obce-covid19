---
title: "Rozpočty obcí a měst v krizi"
subtitle: "Covid-19, hospodářská krize a pokles daňových příjmů"
author: "Petr Bouchal a Petr Janský"
date: "Listopad 2020"
output: 
  bookdown::word_document2:
    reference_docx: idea-template.docx
    number_sections: no
bibliography: [bibliography.bib, packages.bib]
csl: chicago-author-date.csl
zotero: [peta-peta]
params:
  rok: 2019
  scen: "real"
nocite: |
  @monitor
lang: cs
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = F, message = F,
                      dev = "ragg_png", dpi = 300, fig.asp = .6,
                      fig.width = (21-2*2.205)/2.54)

Sys.setlocale(locale = "cs_CZ.UTF-8")

library(tidyverse)
library(ptrr)

library(statnipokladna)
```

```{r load-numbers}
source("cisla_report_stav.R")
```

```{r package-bib, include=FALSE}
knitr::write_bib(file = 'packages.bib')
```

# Shrnutí

-   V této studii shrnujeme stav rozpočtů více než 6000 obcí a měst v roce 2019. Ukazujeme, v jak dobré rozpočtové kondici vstupovaly různé obce a města do roku 2020, který pro ně připravil COVID-19, hospodářskou krizi a pokles daňových příjmů.
-   Nejdůležitějším zdrojem příjmů obcí je rozpočtové určení daní (RUD), které tvořilo `r pc(rud_share)` všech příjmů obcí a v součtu `r nm(rud)` miliard Kč.
-   Výdaje obcí se dělí na běžné (`r pc(1 - kap_share_total)`, `r nm(spend - kap)` miliard Kč) a kapitálové (`r pc(kap_share_total)`, `r nm(kap)` miliard Kč).
-   Deficitní rozpočet mělo `r pc(1 - bil_pos_share)` obcí (průměrný deficit u nich byl `r pc(bil_neg_avg)`, deficit v součtu `r nm(bil_neg_sum)` mld. korun), ostatní obce měly vyrovnaný nebo přebytkový rozpočet (průměrný přebytek unich 7 % a v součtu 28 mld. korun.
-   Nenulový dluh mělo `r pc(dluh_pos_share)` % obcí (u nich dosahoval dluh v průměru `r pc(dluh_pos_mean)` % příjmů) a v součtu tento dluh činil `r nm(dluh)` miliard Kč.
-   Mediánová obec měla rezervy odpovídající `r pc(rez_to_spend_median)` svých ročních výdajů; v součtu tyto rezervy činí `r nm(rez)` miliard Kč (`r pc(rez_pha_share)` těchto rezerv připadá na Prahu a dalších `r pc(rez_krajska_share)` na krajská města).
-   Obce zároveň měly `r nm(kzav)` miliard krátkodobých závazků.
-   Průměrné hodnoty zakrývají velké rozdíly mezi obcemi, na které poukazujeme v grafech.

\newpage

# Úvod

V této studii shrnujeme stav rozpočtů více než 6000 obcí a měst v roce 2019. 
Ukazujeme tedy, v jak moc dobré rozpočtové kondici vstupovali různé obce a města do roku 2020, který pro ně připravil covid-19, hospodářskou krizi a pokles daňových příjmů. 
Konkrétně v této studii upozorňujeme na následující tři fenomény.

**Různorodost obcí.** V mezinárodním srovnání je českých obcí velký počet vůči velikosti země a tyto obce se z rozpočtového hlediska mezi sebou velmi liší: v tom jak zadlužené jsou, jakou mají bilanci příjmů a výdajů a i toho, jak velké mají rezervy.

**Závislost na daňových příjmech.** Zásadním příjmem obcí jako celku je tzv. rozpočtové určení daní (RUD), ale to jak velký podíl má RUD na celkových příjmech konkrétní obce záleží na jejích ostatních příjmech, jako je například daň z nemovitostí.

**Daňové příjmy v krizi.** Daňové příjmy obcí klesají a budou klesat z alespoň tří důvodů. 
Zaprvé, v návaznosti na epidemii covid-19 a související vládní opatření došlo k hospodářské krizi, která s sebou přináší pokles daňových příjmů. 
Zadruhé, některá vládní protikrizová opatření přímo snížila některé daňové příjmy. Zatřetí, vláda se v listopadu 2020 rozhodla výrazně snížit daň z příjmů fyzických osob.

# Příjmy a výdaje

## Příjmy

Nejdůležitějším zdrojem příjmů obcí je rozpočtové určení daní (RUD), které tvořilo `r pc(rud_share)` všech příjmů obcí a v součtu `r nm(rud)` miliard Kč.

#### Box: Rozpočtové určení daní (RUD) {.unnumbered}

Rozpočtové určení daní redistribuuje vybrané daně mezi obce a kraje. Týká se daně z příjmu fyzických i právnických osob a DPH. 
Obce obdrží cca 24 % celkových výnosů těchto daní; na podíl jednotlivých obcí má zásadní vliv počet obyvatel. Kraje pak obdrží celkem cca 9 % výnosu těchto daní.

## Výdaje

Běžné výdaje (například na platy zaměstnanců) činily `r pc(1-kap_share_total)` všech výdajů; v součtu šlo o `r nm(spend - kap)` miliard Kč. 
Menší část tvoří kapitálové výdaje (například investice do nemovitostí nebo infrastruktury), které činily zbylých `r pc(kap_share_total)` výdajů a v součtu `r nm(kap)` miliard Kč.

```{r, eval = F}
indik_slctyr %>% 
  count(typobce, wt = (bilance < 0)/n())
```

```{r, eval = F}
indik_slctyr %>% 
  count(katobyv_nazev, wt = (bilance < 0)/n())
```

```{r, eval = F}
indik_slctyr %>% 
  count(kraj, wt = (bilance < 0)/n())
```

# Bilance rozpočtů

Deficitní rozpočet mělo `r bil_neg_count` z `r n_distinct(indik_slctyr$ico)` (`r pc(1 - bil_pos_share)`) obcí. 
Průměrný deficit u těchto obcí byl `r pc(bil_neg_avg)`, mediánový pak `r pc(bil_neg_median)`. 
Celkový deficit obcí s deficitním financováním byl `r nm(bil_neg_sum)` mld. korun. 
Obce v součtu měly přebytek `r pc(bilance_avg_total, .1)`, tedy `r nm(bilance_sum)` mld. korun.

```{r deficit-podil, fig.cap="Podíl obcí s deficitním rozpočtem", fig.asp=.4}
indik_slctyr %>% 
  group_by(grp = typobce) %>% 
  summarise(podil = mean(bilance < 0), .groups = "drop",
            pocet = n()) %>% 
  mutate(ci = 1.96 * sqrt(podil * (1-podil)/pocet)) %>% 
  ggplot(aes(podil, grp %>% str_wrap(15))) + 
  geom_col() +
  geom_linerange(aes(xmin = pmax(podil - ci, 0), xmax = podil + ci),
                 colour = "darkgrey", linetype = "dotted", size = .8) +
  scale_x_percent_cz(expand = flush_axis) +
  theme_studie(margin_side = 0) +
  labs(title = "Podíl obcí s deficitním rozpočtem")
```

## Dluh

Nenulový dluh mělo `r dluh_pos_count` z `r n_distinct(indik_slctyr$ico)` (`r pc(dluh_pos_share)`) obcí a v součtu tento dluh činil `r nm(dluh)` miliard Kč. Mezi obcemi s nenulovým dluhem dosahoval dluh v průměru `r pc(dluh_pos_mean)` příjmů (a `r pc(dluh_pos_mean_last4)` průměru příjmů za poslední čtyři roky, tj. 2016-2019).

```{r deficit-podil, fig.cap="Podíl obcí s deficitním rozpočtem", fig.asp=.4}
indik_slctyr %>% 
  group_by(grp = typobce) %>% 
  summarise(podil = mean(dluh > 0, na.rm = T), .groups = "drop",
            pocet = n()) %>% 
  mutate(ci = 1.96 * sqrt(podil * (1-podil)/pocet)) %>% 
  ggplot(aes(podil, grp %>% str_wrap(15))) + 
  geom_col() +
  geom_linerange(aes(xmin = pmax(podil - ci, 0), xmax = podil + ci),
                 colour = "darkgrey", linetype = "dotted", size = .8) +
  scale_x_percent_cz(expand = flush_axis) +
  theme_studie(margin_side = 0) +
  labs(title = "Podíl obcí s nenulovým dluhem")
```

Jak ukazujeme v \@ref(fig:plt1), nedává to příliš dobrý smysl.

```{r plt1, fig.cap="blah"}
ggplot(indik_slctyr) +
  geom_histogram(aes(rozp_odp, y = stat(width * density)), binwidth = .05) +
  geom_vline(xintercept = .6) +
  facet_wrap(~typobce)
```

```{r, eval = F}
indik_slctyr %>% 
  count(typobce, wt = (rozp_odp > .6)/n())

```

```{r, eval = F}
indik_slctyr %>% 
  count(kraj, wt = (rozp_odp > .6)/n())
```

# Rezervy

Mediánová obec měla rezervy odpovídající `r pc(rez_to_spend_median)` svých ročních příjmů; v součtu tyto rezervy činí `r nm(rez)` miliard Kč. 
Za rezervy považujeme krátkodobý finanční majetek, v němž dominují prostředky na běžných účtech.
Mediánová obec měla rezervy odpovídající `r pc(rez_to_spend_median)` svých ročních příjmů; v součtu tyto rezervy činí `r nm(rez)` miliard Kč. 
Za rezervy považujeme krátkodobý finanční majetek, v němž dominují prostředky na běžných účtech.
Zhruba `r pc(rez_pha_share)` těchto rezerv ovšem připadá na Prahu a dalších `r pc(rez_krajska_share)` připadá na krajská města. 
Ve stejný moment ovšem obce měly `r nm(kzav)` miliard krátkodobých závazků, k jejichž hrazení mj. hotovost na účtech slouží. 
Ani zbylé rezervy často nejsou volné peníze; obce je často drží jako prostředky pro předfinancování nebo spolufinancování investičních akcí, které mají být hrazeny z dotací, jejichž časování je často špatně předvídatelné. Viz obrázek \@ref(fig:rezervy).

```{r}
indik_slctyr_res <- indik_slctyr %>% 
  mutate(rezerva_to_spend = kratkodoby_fin_majetek/rozp_v_celkem,
         rezerva_to_zavazky = kratkodoby_fin_majetek/kratkodobe_zavazky)
```

```{r rezervy, fig.cap="Rezervy obcí podle typu", fig.asp=.4}
indik_slctyr_res %>% 
  group_by(grp = typobce) %>% 
  summarise(podil = mean(rezerva_to_zavazky < 1, na.rm = T), pocet = n()) %>%
  mutate(ci = 1.96 * sqrt(podil * (1-podil)/pocet)) %>% 
  ggplot(aes(podil, grp %>% str_wrap(15))) + 
  geom_col() +
  geom_linerange(aes(xmin = pmax(podil - ci, 0), xmax = podil + ci),
                 colour = "darkgrey", linetype = "dotted", size = .8) +
  theme_studie() +
  scale_x_percent_cz(expand = flush_axis) +
  labs(title = "Rezervy obcí podle typu",
       subtitle = "Jako % ročních příjmů, rok 2019")
```

# Test citací

Použili jsme balík na data [@R-statnipokladna].

Jak říká @sedmihradska2016, rozpočty jsou těžký. Někdy dokonce nejtěžší [@sedmihradská-nitschová2004].

# Bibliografie
